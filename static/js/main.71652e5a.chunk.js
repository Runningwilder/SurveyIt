(this.webpackJsonpdemo=this.webpackJsonpdemo||[]).push([[0],{356:function(e,t,a){e.exports=a(558)},361:function(e,t,a){},549:function(e,t,a){var n={"./news1.md":550,"./news2.md":551};function r(e){var t=o(e);return a(t)}function o(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=o,e.exports=r,r.id=549},550:function(e,t,a){e.exports=a.p+"static/media/news1.4399bb34.md"},551:function(e,t,a){e.exports=a.p+"static/media/news2.2268c892.md"},552:function(e,t,a){var n={"./news1.md":553};function r(e){var t=o(e);return a(t)}function o(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=o,e.exports=r,r.id=552},553:function(e,t,a){e.exports=a.p+"static/media/news1.a4a7d84c.md"},554:function(e,t,a){var n={"./donate.md":555};function r(e){var t=o(e);return a(t)}function o(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=o,e.exports=r,r.id=554},555:function(e,t,a){e.exports=a.p+"static/media/donate.ac8b0735.md"},558:function(e,t,a){"use strict";a.r(t),a.d(t,"UserContext",(function(){return Ca})),a.d(t,"PopupContext",(function(){return Sa})),a.d(t,"LoginContext",(function(){return Ta}));var n=a(3),r=a(7),o=a(0),c=a.n(o),l=a(17),i=a.n(l),u=(a(361),a(625)),s=a(656),m=a(658);var d=a(657),p=a(644),f=a(643),E=a(560),b=a(562),g=a(617),v=a(21),h=a(162),y=a.n(h),O=a(161),j=a.n(O),x=a(163),k=a.n(x);var w=a(25),C="https://surveyit.ddns.net:8443",S="/SurveyIt",T="small",N=a(24),J=a(269),F=a.n(J),I=a(270),L=a.n(I),P=a(18),A=a(628),D=a(564),M=a(565),R=a(567),z=a(626),B=a(661),V=a(566),W=a(45),q=a(111),G=a.n(q),_=a(619),U=a(621),H=a(561),K=a(622),Y=a(623),$=Object(g.a)((function(e){return{menu:{backgroundColor:"#4c546391"},root:{color:e.palette.grey[300],"&:hover":{background:"linear-gradient(21deg, rgba(54,54,61,0.5723476890756303) 0%, rgba(159,181,185,0.5639443277310925) 100%)"}},checkbox:{padding:3}}}));function X(e){var t=$(),a=c.a.useState({categories:[],checked:[0]}),n=Object(r.a)(a,2),o=(n[0],n[1],c.a.useState([])),l=Object(r.a)(o,2),i=l[0],u=l[1],s=c.a.useState([0]),m=Object(r.a)(s,2),d=m[0],p=m[1];c.a.useEffect((function(){fetch("".concat(C,"/getCategories"),{method:"GET",redirect:"follow",credentials:"include"}).then((function(e){if(200===e.status)return e.json()})).then((function(e){p(e.filter((function(e){return!0===e.checked})).map((function(e){return e.name}))),u(e)}))}),[]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(_.a,{className:t.menu},c.a.createElement(U.a,{disablePadding:!0,dense:!0},i.map((function(e){var a,n="checkbox-list-label-".concat(e.name);return c.a.createElement(H.a,{className:t.root,key:"category-".concat(e.id),button:!0,onClick:(a=e.name,function(){var e=d.indexOf(a),t=Object(N.a)(d);-1===e?t.push(a):t.splice(e,1);var n={skipped:i.filter((function(e){return!t.includes(e.name)})).map((function(e){return e.name}))};fetch("".concat(C,"/updateChecked"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n),redirect:"follow",credentials:"include"}).then((function(e){200===e.status&&p(t)}))})},c.a.createElement(K.a,null,c.a.createElement(B.a,{className:t.checkbox,edge:"start",checked:-1!==d.indexOf(e.name),tabIndex:-1,disableRipple:!0,inputProps:{"aria-labelledby":n}})),c.a.createElement(Y.a,{primary:e.name}))})))))}var Z=a(285),Q=a.n(Z),ee=a(284),te=a.n(ee),ae=a(286),ne=a.n(ae),re=a(287),oe=a.n(re),ce=a(283),le=a.n(ce),ie=a(624),ue=a(290),se=a.n(ue),me=a(100),de=a.n(me),pe=a(289),fe=a.n(pe),Ee=a(288),be=a.n(Ee),ge=Object(g.a)((function(e){return{list:{padding:0},checkbox:{padding:3},inactive:{color:e.palette.grey[300],textDecoration:"none"},menu:{backgroundColor:"#4c546391"},icon:{color:e.palette.grey[300]},root:{"&:hover":{background:"linear-gradient(21deg, rgba(54,54,61,0.5723476890756303) 0%, rgba(159,181,185,0.5639443277310925) 100%)"},color:e.palette.common.white},rotate:{animation:"spin 15s linear infinite"}}}));function ve(e){var t=c.a.useContext(Sa),a=c.a.useContext(Ca),o=ge(),l=(Object(w.f)(),c.a.useContext(Ta)),i=c.a.useState({links:[{name:"\u041d\u043e\u0432\u043e\u0433\u043e\u0434\u043d\u0438\u0435",link:"random?tag=newyear",icon:c.a.createElement(le.a,{className:o.rotate})},{name:"\u0414\u043e\u043c\u0430\u0448\u043d\u044f\u044f",link:"home",icon:c.a.createElement(te.a,null)},{name:"\u0420\u0430\u043d\u0434\u043e\u043c",link:"random",icon:c.a.createElement(Q.a,null)},{name:"\u041a\u0443\u043f\u0438\u0442\u044c \u043a\u043e\u0444\u0435",link:"donate",icon:c.a.createElement(ne.a,null)},{name:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u0439",link:"news",icon:c.a.createElement(oe.a,null)},{name:"\u041e \u0441\u0430\u0439\u0442\u0435",link:"about",icon:c.a.createElement(be.a,null)}],profileLinks:[{name:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c",link:"profile",icon:null},{name:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",link:"createSurvey",icon:null},{name:"\u0412\u044b\u0439\u0442\u0438",link:"signout",icon:null,callback:function(e){fetch("".concat(C,"/signout"),{method:"POST",credentials:"include"}).then((function(e){200===e.status&&(l(),t("\u0412\u044b \u0432\u044b\u0448\u043b\u0438 :("))}))}}]}),u=Object(r.a)(i,2),s=u[0],m=u[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement(_.a,{className:o.menu},c.a.createElement(U.a,{disablePadding:!0,dense:!0},s.links.map((function(e,t){return c.a.createElement(c.a.Fragment,null,c.a.createElement(v.b,{to:"".concat(S,"/").concat(e.link),className:o.inactive,onClick:function(e){return m(Object(n.a)(Object(n.a)({},s),{},{selectedIndex:t}))}},c.a.createElement(H.a,{button:!0,selected:"".concat(window.location.pathname).concat(window.location.search)==="".concat(S,"/").concat(e.link),className:o.root},c.a.createElement(K.a,{className:o.icon},e.icon),c.a.createElement(Y.a,{primary:e.name}))))})),!a.loggedIn&&c.a.createElement(v.b,{to:"".concat(S,"/login"),className:o.inactive},c.a.createElement(H.a,{button:!0,selected:"".concat(window.location.pathname).concat(window.location.search)==="".concat(S,"/login"),className:o.root},c.a.createElement(Y.a,{primary:"Sign In / Sign Up"}))),a.loggedIn&&c.a.createElement(c.a.Fragment,null,c.a.createElement(H.a,{className:o.root,button:!0,onClick:function(){m(Object(n.a)(Object(n.a)({},s),{},{open:!s.open}))}},c.a.createElement(K.a,{className:o.icon},c.a.createElement(fe.a,null)),c.a.createElement(Y.a,{primary:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"}),s.open?c.a.createElement(se.a,null):c.a.createElement(de.a,null)),c.a.createElement(ie.a,{in:s.open,timeout:"auto",unmountOnExit:!0},c.a.createElement(U.a,{disablePadding:!0,dense:!0},s.profileLinks.map((function(e,t){return c.a.createElement(v.b,{to:"".concat(S,"/").concat(e.link),className:o.inactive},c.a.createElement(H.a,{button:!0,selected:"".concat(window.location.pathname).concat(window.location.search)==="".concat(S,"/").concat(e.link),className:o.root,onClick:e.callback},c.a.createElement(Y.a,{primary:e.name})))}))))))))}var he=a(112),ye=a(304);function Oe(e){var t=c.a.useState(""),a=Object(r.a)(t,2),n=a[0],o=a[1],l=c.a.useState(e.markers),i=Object(r.a)(l,2);i[0],i[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement(he.ComposableMap,{"data-tip":"",projection:"geoEqualEarth",height:"400",projectionConfig:{}},c.a.createElement(he.ZoomableGroup,{zoom:3,center:[50,50]},c.a.createElement(he.Geographies,{geography:"https://raw.githubusercontent.com/mtraynham/natural-earth-topo/master/topojson/ne_110m_admin_0_countries.json"},(function(e){return e.geographies.map((function(e){return c.a.createElement(he.Geography,{onMouseEnter:function(){var t=e.properties.name;o("".concat(t))},onMouseLeave:function(){o("")},style:{default:{fill:"#D6D6DA",outline:"none"},hover:{fill:"#F53",outline:"none"},pressed:{fill:"#E42",outline:"none"}},key:e.rsmKey,geography:e,fill:"#DDD",stroke:"#FFF"})}))})),e.markers&&e.markers.map((function(e){return c.a.createElement(he.Marker,{coordinates:[e.lo,e.la]},c.a.createElement("circle",{r:2,fill:"#F53"}))})))),c.a.createElement(ye.a,null,n))}var je=a(5),xe=a(291),ke=a.n(xe),we=a(662),Ce=a(157),Se=a.n(Ce),Te=Object(g.a)((function(e){return{expand:{transform:"rotate(0deg)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"}}})),Ne=c.a.createContext(null);function Je(e){var t=c.a.useContext(Sa),a=Te(),o=c.a.useState({isLoading:!0,survey:{},expanded:!1,keyPressed:null,commentsExpanded:!1,imageOpen:!1}),l=Object(r.a)(o,2),i=l[0],s=l[1],m=function(e){s(Object(n.a)(Object(n.a)({},i),{},{isLoading:!0,keyPressed:null})),fetch("".concat(C,"/getRandom").concat(window.location.search),{method:"GET",credentials:"include"}).then((function(e){if(200===e.status)return e.json()})).then((function(e){s(Object(n.a)(Object(n.a)({},i),{},{survey:e,isLoading:!1})),null==e&&t("\u041d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e :(")}))},d=function(e){console.log(i.expanded),s(Object(n.a)(Object(n.a)({},i),{},{expanded:!i.expanded}))},p=function(e){s(Object(n.a)(Object(n.a)({},i),{},{hintOpen:e}))};return c.a.useEffect((function(){m()}),[e.location.search]),window.onkeyup=function(e){console.log(e.keyCode),32!==e.keyCode?77!==e.keyCode?67!==e.keyCode?73!==e.keyCode?75!==e.keyCode?s(Object(n.a)(Object(n.a)({},i),{},{keyPressed:e})):s(Object(n.a)(Object(n.a)({},i),{},{hintOpen:!i.hintOpen})):s(Object(n.a)(Object(n.a)({},i),{},{imageOpen:!i.imageOpen})):s(Object(n.a)(Object(n.a)({},i),{},{commentsExpanded:!i.commentsExpanded})):s(Object(n.a)(Object(n.a)({},i),{},{expanded:!i.expanded})):m()},c.a.createElement(Ne.Provider,{value:i.keyPressed},c.a.createElement(u.a,{item:!0,sm:9,style:{margin:"auto",marginTop:"20px",position:"relative"}},c.a.createElement(_.a,{style:{backgroundColor:"transparent"},onClick:d},c.a.createElement(b.a,{color:"primary",style:{padding:"0",margin:"0 auto",display:"block"},className:Object(je.a)(a.expand,Object(P.a)({},a.expandOpen,i.expanded))},c.a.createElement(de.a,null))),c.a.createElement(ie.a,{timeout:100,style:{borderTop:"1px solid #e0e0e0",position:"absolute",width:"100%",zIndex:1},in:i.expanded,unmountOnExit:!0},c.a.createElement(Oe,{markers:null!=i.survey&&!i.isLoading&&i.survey.locations})),null!=i.survey&&!i.isLoading&&c.a.createElement(bt,{imageOpen:i.imageOpen,expanded:i.commentsExpanded,openMap:d,bindKeys:!0,surveyJson:i.survey,onSurveyDeleteFunc:function(e){m()}}),c.a.createElement(z.a,{variant:"contained",color:"primary",onClick:m},"\u0414\u0430\u043b\u044c\u0448\u0435"),c.a.createElement(we.a,{open:i.hintOpen,onClose:function(){p(!1)}},c.a.createElement(b.a,{style:{position:"absolute",right:"0"},onClick:function(){p(!1)}},c.a.createElement(Se.a,null)),c.a.createElement("img",{alt:"",style:{width:"100%"},src:"https://i.ibb.co/TMxXxjx/Keys.png"})),c.a.createElement(b.a,{onClick:function(){p(!0)},color:"primary"},c.a.createElement(ke.a,null))))}function Fe(e){e=e.props;var t=c.a.useContext(Ne),a=c.a.useState({error:!1,voted:e.surveyJson.answered,options:{},helperText:e.HelperText,chart:void 0}),o=Object(r.a)(a,2),l=o[0],i=o[1],u=function(t){t&&t.preventDefault();var a={surveyId:e.surveyJson.id,choosedOptions:Object.keys(l.options).filter((function(e){return!0===l.options[e]}))};e.handleSubmit(t,a,m,s)},s=function(t,a){var r=a.map((function(e){return e.name})).sort((function(e,t){return t.length-e.length}))[0].length,o=e.surveyJson.choosedOptions||Object.keys(l.options).filter((function(e){return!0===l.options[e]})),u=c.a.createElement(W.b,{width:20*r+300,height:40*a.length,data:a,layout:"vertical"},c.a.createElement(W.d,{type:"number",hide:!0}),c.a.createElement(W.e,{tick:function(e){return c.a.createElement("text",{x:e.x,y:e.y,textAnchor:"end",fontWeight:o.includes(e.payload.value)?"bold":"normal",fill:o.includes(e.payload.value)?"blue":"black"},e.payload.value+" ("+a.filter((function(t){return t.name===e.payload.value}))[0].value+"%)")},type:"category",dataKey:"name",width:20*r}),c.a.createElement(W.c,{content:function(e){if(null!=e.payload[0]){var t=[{name:"\u0433\u043e\u043b\u043e\u0441\u043e\u0432",value:e.payload[0].payload.count}];return c.a.createElement(G.a,Object.assign({},e,{payload:t}))}return c.a.createElement(G.a,e)}}),c.a.createElement(W.a,{dataKey:"value",fill:"#8884d8"}));i(Object(n.a)(Object(n.a)({},l),{},{chart:u}))},m=function(){return 0===Object.values(l.options).filter((function(e){return!0===e})).length?(i(Object(n.a)(Object(n.a)({},l),{},{helperText:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0430\u0440\u0438\u0430\u043d\u0442",error:!0})),!1):(i(Object(n.a)(Object(n.a)({},l),{},{helperText:e.HelperText,error:!1})),!0)},d=function(e){i(Object(n.a)(Object(n.a)({},l),{},{options:Object(n.a)(Object(n.a)({},l.options),{},Object(P.a)({},e.target.name,e.target.checked))}))};return c.a.useEffect((function(){e.Answered&&e.getStats(void 0,s)}),[e.Answered]),c.a.useEffect((function(){if(t&&(t=t.keyCode),t>=49&&t<=49+Object.keys(e.surveyJson.options).length-1){var a=!l.options[e.surveyJson.options[t-49]];i(Object(n.a)(Object(n.a)({},l),{},{options:Object(n.a)(Object(n.a)({},l.options),{},Object(P.a)({},e.surveyJson.options[t-49],a))}))}13===t&&u()}),[t]),c.a.useEffect((function(){i(Object(n.a)(Object(n.a)({},l),{},{error:!1}))}),[]),c.a.createElement(D.a,{component:"fieldset",error:l.error},!e.flipped&&c.a.createElement("form",{onSubmit:u},c.a.createElement(M.a,{component:"legend"},e.surveyJson.question),c.a.createElement(V.a,null,!e.Answered&&e.surveyJson.options.map((function(e){return c.a.createElement(A.a,{checked:1==l.options[e],control:c.a.createElement(B.a,{name:e,onChange:d}),label:e})}))),c.a.createElement(R.a,null,l.helperText),!e.Answered&&c.a.createElement(z.a,{type:"submit",variant:"contained",color:"primary"},"\u0423\u0437\u043d\u0430\u0442\u044c"),e.Answered&&l.chart))}var Ie=a(660),Le=a(629),Pe=Object(g.a)((function(e){return{bar:{color:"red",fontSize:"smaller"}}}));function Ae(e){e=e.props;var t=c.a.useContext(Ne),a=c.a.useState({error:!1,voted:e.surveyJson.answered,choosedOption:"",helperText:e.HelperText,chart:void 0,options:e.surveyJson.options.map((function(e){return{name:e,chart:c.a.createElement("br",null)}})),keyPressed:null}),o=Object(r.a)(a,2),l=o[0],i=o[1],u=Pe(),s=function(t){if(!l.voted){t&&t.preventDefault();var a={surveyId:e.surveyJson.id,choosedOption:l.choosedOption};e.handleSubmit(t,a,m,d)}},m=function(){return""===l.choosedOption?(i(Object(n.a)(Object(n.a)({},l),{},{error:!0,helperText:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0430\u0440\u0438\u0430\u043d\u0442"})),!1):(i(Object(n.a)(Object(n.a)({},l),{},{error:!1,helperText:e.HelperText})),!0)},d=function(t,a){var r=a.map((function(e){return e.name})).sort((function(e,t){return t.length-e.length}))[0].length,o=e.surveyJson.choosedOption||l.choosedOption;l.options.forEach((function(e){var t=a.filter((function(t){return t.name===e.name}));e.name=e.name,e.value=t[0].value;var n=c.a.createElement(W.b,{width:14*r+200,height:20,data:t,barSize:10,layout:"vertical"},c.a.createElement(W.d,{type:"number",hide:!0}),c.a.createElement(W.e,{hide:!0,tick:function(e){return c.a.createElement("text",{x:e.x,y:e.y,textAnchor:"end",fontWeight:e.payload.value===o?"bold":"normal",fill:e.payload.value===o?"blue":"black"},e.payload.value+" ("+a.filter((function(t){return t.name===e.payload.value}))[0].value+"%)")},type:"category",dataKey:"name",width:14*r}),c.a.createElement(W.c,{content:function(e){if(null!=e.payload[0]){var t=[{name:"\u0433\u043e\u043b\u043e\u0441\u043e\u0432",value:e.payload[0].payload.count}];return c.a.createElement(G.a,Object.assign({},e,{payload:t}))}return c.a.createElement(G.a,e)}}),c.a.createElement(W.a,{background:{fill:"#eee"},dataKey:"value",fill:"#8884d8"}));e.chart=n})),i(Object(n.a)(Object(n.a)({},l),{},{options:l.options,voted:!0}))};return c.a.useEffect((function(){e.Answered&&e.getStats(void 0,d)}),[e.Answered]),c.a.useEffect((function(){t&&(t=t.keyCode),t>=49&&t<=49+l.options.length-1&&i(Object(n.a)(Object(n.a)({},l),{},{choosedOption:l.options[t-49].name})),13===t&&s()}),[t]),c.a.useEffect((function(){i(Object(n.a)(Object(n.a)({},l),{},{choosedOption:"",error:!1}))}),[]),c.a.createElement(D.a,{component:"fieldset",error:l.error},!e.flipped&&c.a.createElement("form",{onSubmit:s},c.a.createElement(M.a,{component:"legend"},e.surveyJson.question),c.a.createElement(Le.a,{value:e.surveyJson.choosedOption?e.surveyJson.choosedOption:l.choosedOption,onChange:function(e){l.voted||i(Object(n.a)(Object(n.a)({},l),{},{choosedOption:e.target.value}))}},l.options.map((function(e,t){return c.a.createElement(c.a.Fragment,null,c.a.createElement(A.a,{value:e.name,control:c.a.createElement(Ie.a,null),label:c.a.createElement("div",{style:{color:l.choosedOption===e.name?"blue":"black"}},e.name,l.voted?" (".concat(e.value,"%)"):"")}),c.a.createElement("div",{className:u.bar},e.chart))}))),c.a.createElement(R.a,null,l.helperText),!l.voted&&c.a.createElement(z.a,{type:"submit",variant:"contained",color:"primary"},"\u0423\u0437\u043d\u0430\u0442\u044c")))}var De=a(631),Me=a(635),Re=a(634),ze=a(630),Be=a(632),Ve=a(633),We=a(47);function qe(e){e=e.props;var t=c.a.useState({error:!1,voted:e.surveyJson.answered,helperText:e.HelperText,errors:{option:"",duplicate:""},selectedValues:new Array(e.surveyJson.rows.length),stats:null}),a=Object(r.a)(t,2),o=a[0],l=a[1],i=function(){var t=!1,a="";return new Set(o.selectedValues.filter((function(e){return void 0!==e}))).size!==o.selectedValues.filter((function(e){return void 0!==e})).length&&(t=!0,a="\u041d\u0435 \u0431\u043e\u043b\u0435\u0435 \u043e\u0434\u043d\u043e\u0433\u043e \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u0430 \u0432 \u043a\u0430\u0436\u0434\u043e\u0439 \u0441\u0442\u0440\u043e\u043a\u0435 / \u043a\u043e\u043b\u043e\u043d\u043a\u0435"),o.selectedValues.filter((function(e){return void 0!==e})).length<e.surveyJson.rows.length&&(t=!0,a=a+"\n"+"\u0417\u0430\u043f\u043e\u043b\u043d\u0438\u0442\u0435 \u0432\u0441\u0435 \u0440\u044f\u0434\u043a\u0438"),t?(l(Object(n.a)(Object(n.a)({},o),{},{error:!0,helperText:a})),!1):(l(Object(n.a)(Object(n.a)({},o),{},{error:!1,helperText:e.HelperText})),!0)},u=function(e,t){console.log("processing from Rating");var a=t;l(Object(n.a)(Object(n.a)({},o),{},{stats:a}))},s=function(e,t){var a=parseInt(e,16),n=Math.round(2.55*t),r=(a>>16)+n,o=(a>>8&255)+n,c=(255&a)+n;return console.log((16777216+65536*(r<255?r<1?0:r:255)+256*(o<255?o<1?0:o:255)+(c<255?c<1?0:c:255)).toString(16).slice(1)),(16777216+65536*(r<255?r<1?0:r:255)+256*(o<255?o<1?0:o:255)+(c<255?c<1?0:c:255)).toString(16).slice(1)};return c.a.useEffect((function(){e.Answered&&e.getStats(void 0,u)}),[e.Answered]),c.a.createElement(D.a,{component:"fieldset",error:o.error},!e.flipped&&c.a.createElement("form",{onSubmit:function(t){t.preventDefault();var a={surveyId:e.surveyJson.id,rowsColumns:o.selectedValues};e.handleSubmit(t,a,i,u)}},c.a.createElement(M.a,{component:"legend"},e.surveyJson.question),c.a.createElement(V.a,null,c.a.createElement(ze.a,{component:E.a},c.a.createElement(De.a,null,c.a.createElement(Be.a,null,c.a.createElement(Ve.a,null,c.a.createElement(Re.a,null),e.surveyJson.columns.map((function(e,t){return c.a.createElement(Re.a,{key:t,align:"center"},e)})))),c.a.createElement(Me.a,null,e.surveyJson.rows.map((function(t,a){return c.a.createElement(Ve.a,{key:a},c.a.createElement(Re.a,{component:"th",scope:"row"},t),e.surveyJson.columns.map((function(t,r){return c.a.createElement(Re.a,{key:r,align:"center"},e.Answered&&o.stats&&(i=o.stats[a][r].value,u=o.stats[a][r].count,c.a.createElement(We.a,{title:"".concat(Math.floor(u)," \u0447\u0435\u043b\u043e\u0432\u0435\u043a"),style:{fontWeight:"bold",color:"#".concat(s("41465f",(100-i)/2)),fontSize:"".concat(10+i/100*4,"px")}},Math.floor(i),"%")),!e.Answered&&c.a.createElement(Ie.a,{name:"r"+a,onChange:function(e){!function(e,t){var a=o.selectedValues;if(a.includes(e.target.value)){var r=a.indexOf(e.target.value);a[r]=void 0,a[t]=e.target.value,l(Object(n.a)(Object(n.a)({},o),{},{selectedValues:a}))}else a[t]=e.target.value,l(Object(n.a)(Object(n.a)({},o),{},{selectedValues:a}))}(e,r)},checked:o.selectedValues[r]===e.surveyJson.rows[a],value:e.surveyJson.rows[a]}));var i,u})))})))))),c.a.createElement(R.a,null,o.helperText),c.a.createElement(z.a,{type:"submit",variant:"contained",color:"primary"},"\u0423\u0437\u043d\u0430\u0442\u044c")))}var Ge=a(641),_e=a(636),Ue=a(642),He=a(663),Ke=a(297),Ye=a.n(Ke),$e=a(296),Xe=a.n($e),Ze=a(298),Qe=a.n(Ze),et=a(294),tt=a.n(et),at=a(305),nt=a(640),rt=a(637),ot=a(638),ct=a(293),lt=a.n(ct),it=a(639),ut=a(292),st=a.n(ut),mt=Object(g.a)((function(e){return{avatar:{backgroundColor:"#41465f"}}}));function dt(e){var t=c.a.useContext(Ca),a=c.a.useContext(Sa),o=mt(),l=c.a.useState({commentError:"",comment:"",comments:e.surveyJson.comments}),i=Object(r.a)(l,2),u=i[0],s=i[1],m=function(t){t.preventDefault(),u.comment.length<5||u.comment.length>200?s(Object(n.a)(Object(n.a)({},u),{},{commentError:"\u041d\u0435 \u043c\u0435\u043d\u044c\u0448\u0435 5 \u0438 \u043d\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 200 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432"})):(s(Object(n.a)(Object(n.a)({},u),{},{commentError:""})),fetch("".concat(C,"/addComment"),{headers:{"Content-Type":"application/json"},method:"POST",credentials:"include",body:JSON.stringify({content:u.comment,surveyId:e.surveyJson.id})}).then((function(e){if(200==e.status)return e.json()})).then((function(t){if(t){console.log(t);var a=u.comments,r=new Date(t.date);a.push({content:u.comment,likes:0,user_id:t.user_id,username:"admin",date:"".concat(r.getFullYear(),"/").concat(r.getMonth()+1,"/").concat(r.getDate()),id:t.id}),s(Object(n.a)(Object(n.a)({},u),{},{comments:a})),e.setCommentsLength&&e.setCommentsLength(a.length)}})))};return c.a.createElement(ie.a,{style:{borderTop:"1px solid #e0e0e0"},in:e.expanded,timeout:"auto",unmountOnExit:!0},c.a.createElement(_e.a,null,c.a.createElement(U.a,null,u.comments.map((function(r){return c.a.createElement(c.a.Fragment,null,c.a.createElement(H.a,{style:{padding:0,paddingLeft:10},alignItems:"flex-start"},c.a.createElement(rt.a,null,c.a.createElement(He.a,{style:{width:30,height:30},variant:"rounded","aria-label":"",className:o.avatar},r.username&&r.username.charAt(0))),c.a.createElement(Y.a,{primary:c.a.createElement(c.a.Fragment,null,r.username+"  ",c.a.createElement(We.a,{variant:"caption",component:"span",color:"textSecondary"},r.date)),secondary:c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{style:{display:"flex",wordBreak:"break-word"}},c.a.createElement(We.a,{component:"span",variant:"body2",style:{display:"inline"},color:"textPrimary"},r.content),c.a.createElement("div",{style:{marginLeft:"auto"}},t.userId===e.surveyJson.userId&&c.a.createElement(b.a,{className:o.icon,onClick:function(t){return o=r.id,void fetch("".concat(C,"/deleteComment"),{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({commentId:o}),redirect:"follow",credentials:"include"}).then((function(t){if(200===t.status){var r=u.comments.filter((function(e){return e.id!==o}));s(Object(n.a)(Object(n.a)({},u),{},{comments:r})),e.setCommentsLength&&e.setCommentsLength(r.length),a("\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439 \u0443\u0434\u0430\u043b\u0435\u043d :)")}}));var o}},c.a.createElement(st.a,null)),c.a.createElement(We.a,{component:"span"},0!=r.likes&&r.likes),c.a.createElement(b.a,{color:r.voted?"secondary":"primary",className:o.icon,"aria-label":"add to favorites",onClick:function(e){!function(e){null!==t.userId?(e.likes=e.voted?e.likes-1:e.likes+1,e.voted=!e.voted,s(Object(n.a)(Object(n.a)({},u),{},{comments:u.comments})),fetch("".concat(C,"/commentLike"),{headers:{"Content-Type":"application/json"},method:"POST",credentials:"include",body:JSON.stringify({commentId:e.id})}).then((function(t){if(200==t.status)return t.json();e.likes=e.voted?e.likes-1:e.likes+1,e.voted=!e.voted,s(Object(n.a)(Object(n.a)({},u),{},{comments:u.comments}))})).then((function(t){t&&(e.likes=t.likes,e.voted=t.voted,s(Object(n.a)(Object(n.a)({},u),{},{comments:u.comments})))}))):a("\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0443\u0439\u0442\u0435\u0441\u044c, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 :\u0441")}(r)}},c.a.createElement(lt.a,null)))))})),c.a.createElement(ot.a,{variant:"inset",component:"li"}))}))),c.a.createElement(D.a,{style:{display:"flex"}},c.a.createElement("form",{onSubmit:m},c.a.createElement(it.a,{style:{display:"flex"},id:"standard-textarea",label:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c",placeholder:"",multiline:!0,onBlur:function(e){s(Object(n.a)(Object(n.a)({},u),{},{comment:e.target.value})),e.target.value=""}}),u.commentError&&c.a.createElement(R.a,{error:!0},u.commentError),c.a.createElement(z.a,{onClick:m,type:"submit",variant:"contained"},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c")))))}var pt=Object(g.a)((function(e){var t;return{header:{padding:0,backgroundColor:e.palette.primary.main},expand:{transform:"rotate(0deg)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:"#41465f"},tag:(t={margin:2,backgroundColor:"#a2a2dc"},Object(P.a)(t,"margin",2),Object(P.a)(t,"borderRadius",5),Object(P.a)(t,"cursor","pointer"),Object(P.a)(t,"&:hover",{backgroundColor:"#c3c3ec"}),Object(P.a)(t,"fontSize",15),Object(P.a)(t,"color","#2f4f4f"),Object(P.a)(t,"paddingLeft",5),Object(P.a)(t,"paddingRight",5),Object(P.a)(t,"fontFamily",e.typography.fontFamily),t),action:{margin:0}}}));function ft(e){var t=c.a.useContext(Ne),a=c.a.useContext(Ca),l=pt(),i=c.a.useContext(Sa),u=c.a.useState({answered:e.surveyJson.answered,answeredAmount:e.surveyJson.answered_amount,likes:e.surveyJson.likes,voted:e.surveyJson.voted,flipped:!0,anchorEl:null,expanded:!1,commentsCount:e.surveyJson.comments.length}),s=Object(r.a)(u,2),m=s[0],d=s[1],p=function(e){return d(Object(n.a)(Object(n.a)({},m),{},{anchorEl:null}))},E=function(t){null!==a.userId?(d(Object(n.a)(Object(n.a)({},m),{},{voted:!m.voted})),fetch("".concat(C,"/like"),{headers:{"Content-Type":"application/json"},method:"POST",credentials:"include",body:JSON.stringify({surveyId:e.surveyJson.id})}).then((function(t){return 403===t.status&&(console.log("403"),d(Object(n.a)(Object(n.a)({},m),{},{voted:e.surveyJson.voted}))),t.json()})).then((function(e){"Added"===e.result?d(Object(n.a)(Object(n.a)({},m),{},{likes:e.likes,voted:!0})):"Deleted"===e.result&&d(Object(n.a)(Object(n.a)({},m),{},{likes:e.likes,voted:!1}))}))):i("\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0443\u0439\u0442\u0435\u0441\u044c, \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 :\u0441")};return c.a.useEffect((function(){t&&(t=t.keyCode),76===t&&E()}),[t]),c.a.useEffect((function(){d(Object(n.a)(Object(n.a)({},m),{},{expanded:e.expanded}))}),[e.expanded]),c.a.createElement(c.a.Fragment,null,c.a.createElement(at.a,{id:"simple-menu",anchorEl:m.anchorEl,keepMounted:!0,open:Boolean(m.anchorEl),onClose:p},c.a.createElement(nt.a,{onClick:function(){p(),fetch("".concat(C,"/deleteSurvey"),{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({surveyId:e.surveyJson.id}),redirect:"follow",credentials:"include"}).then((function(t){200===t.status&&i("\u0423\u0434\u0430\u043b\u0435\u043d\u043e :)"),e.onSurveyDeleteFunc&&e.onSurveyDeleteFunc()}))}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")),c.a.createElement(_.a,null,c.a.createElement(Ge.a,{className:l.header,avatar:c.a.createElement(He.a,{variant:"square",className:l.avatar}),action:a.userId===e.surveyJson.userId?c.a.createElement(b.a,{onClick:function(e){return d(Object(n.a)(Object(n.a)({},m),{},{anchorEl:e.currentTarget}))},size:T,edge:"start"},c.a.createElement(tt.a,null)):"",subheader:c.a.createElement(v.b,{to:"".concat(S,"/survey/").concat(e.surveyJson.id),style:{textDecoration:"none"}},e.surveyJson.date),classes:{action:l.action}}),c.a.createElement(_e.a,{style:{padding:"0px"}},o.Children.map(e.children,(function(e){return Object(o.cloneElement)(e,{flipped:m.flipped})}))),c.a.createElement(Ue.a,{disableSpacing:!0},c.a.createElement(f.a,{title:e.Answered?"\u0412\u044b \u043f\u0440\u043e\u0433\u043e\u043b\u043e\u0441\u043e\u0432\u0430\u043b\u0438":"\u0412\u044b \u043d\u0435 \u043f\u0440\u043e\u0433\u043e\u043b\u043e\u0441\u043e\u0432\u0430\u043b\u0438"},c.a.createElement(b.a,{size:T,className:l.icon},c.a.createElement(Xe.a,{color:e.Answered?"secondary":"primary"}))),m.answeredAmount>0&&m.answeredAmount,c.a.createElement(b.a,{size:T,className:l.icon,onClick:E},c.a.createElement(Ye.a,{color:m.voted?"secondary":"primary"})),m.likes>0&&m.likes,m.answered&&c.a.createElement(b.a,{size:T,onClick:function(e){return d(Object(n.a)(Object(n.a)({},m),{},{flipped:!m.flipped}))}}," ",c.a.createElement(Qe.a,null)," "),e.surveyJson.tags.map((function(e){return c.a.createElement("div",{className:l.tag},e)})),c.a.createElement(We.a,{style:{marginLeft:"auto",marginRight:5,marginBottom:0},paragraph:!0},"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438 (",m.commentsCount,")"),c.a.createElement(b.a,{className:Object(je.a)(l.expand,Object(P.a)({},l.expandOpen,m.expanded)),onClick:function(e){return d(Object(n.a)(Object(n.a)({},m),{},{expanded:!m.expanded}))},"aria-expanded":m.expanded},c.a.createElement(de.a,null))),c.a.createElement(dt,{surveyJson:e.surveyJson,expanded:m.expanded,setCommentsLength:function(e){d(Object(n.a)(Object(n.a)({},m),{},{commentsCount:e}))}})))}var Et=Object(g.a)((function(e){return{surveyCard:{"&:focus":{outline:"none"}}}}));function bt(e){c.a.useContext(Ne);var t=Et(),a=Object(w.f)(),o=e.surveyJson.image,l=(c.a.useContext(Sa),c.a.useState({helperText:"\u041e\u0442\u0432\u0435\u0442\u044c \u0441\u0430\u043c, \u0447\u0442\u043e\u0431\u044b \u0443\u0437\u043d\u0430\u0442\u044c \u043c\u043d\u0435\u043d\u0438\u044f \u0434\u0440\u0443\u0433\u0438\u0445",answered:e.surveyJson.answered,open:!1,pressed:!1})),i=Object(r.a)(l,2),s=i[0],m=i[1],d=function(e){m(Object(n.a)(Object(n.a)({},s),{},{open:e}))};c.a.useEffect((function(){m(Object(n.a)(Object(n.a)({},s),{},{open:e.imageOpen}))}),[e.imageOpen]);var p={pressed:s.pressed,choosedIndex:s.choosedIndex,getStats:function(t,a){fetch("".concat(C,"/getStats?surveyId=").concat(e.surveyJson.id),{method:"GET",redirect:"follow",credentials:"include"}).then((function(e){200===e.status&&e.json().then((function(e){a(t,e)}))}))},Answered:s.answered,handleSubmit:function(t,a,r,o){r()&&fetch("".concat(C,"/answerSurvey"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a),redirect:"follow",credentials:"include"}).then((function(t){200===t.status?(console.log("base: answered"),m(Object(n.a)(Object(n.a)({},s),{},{answered:!0}))):e.History.push("/login")}))},surveyJson:e.surveyJson,HelperText:s.helperText,History:a,onSurveyDeleteFunc:e.onSurveyDeleteFunc,openMap:e.openMap};return c.a.createElement(c.a.Fragment,null,c.a.createElement(ft,{Answered:s.answered,surveyJson:e.surveyJson,onSurveyDeleteFunc:e.onSurveyDeleteFunc,expanded:e.expanded},c.a.createElement(u.a,{tabindex:0,id:"surveyCard",className:t.surveyCard,container:!0},c.a.createElement(u.a,{item:!0,xs:""===o||null===o?0:4},c.a.createElement("img",{onClick:function(){return d(!0)},alt:"",style:{width:"100%",maxWidth:"200px",cursor:"pointer"},src:o})),c.a.createElement(u.a,{item:!0,xs:""===o||null===o?12:8},"Single"===e.surveyJson.type&&c.a.createElement(Ae,{props:p}),"Multiple"===e.surveyJson.type&&c.a.createElement(Fe,{props:p}),"Rating"===e.surveyJson.type&&c.a.createElement(qe,{props:p}))),c.a.createElement(we.a,{open:s.open,onClose:function(){d(!1)}},c.a.createElement(b.a,{style:{position:"absolute",right:"0"},onClick:function(){d(!1)}},c.a.createElement(Se.a,null)),c.a.createElement("img",{alt:"",style:{width:"100%"},src:o}))))}function gt(e){c.a.useContext(Sa);var t=Object(o.useRef)(null),a=c.a.useState({error:!1,hasMore:!0,isLoading:!0,surveys:[],index:0}),l=Object(r.a)(a,2),i=l[0],u=l[1],s=function(e){},m=function(t,a,r){r&&u(Object(n.a)(Object(n.a)({},i),{},{surveys:[]}));var o="Top"===e.Mode?"".concat(C,"/surveys-top?index="):"".concat(C,"/surveys?index=");o+=i.index,o+=void 0!==t?"&tag="+t:"&tag=",o+=void 0!==a?"&type="+a:"&type=",F.a.get(o).withCredentials().then((function(e){var t=e.body.map((function(e){return c.a.createElement(bt,{surveyJson:e,onSurveyDeleteFunc:s})}));u(Object(n.a)(Object(n.a)({},i),{},{hasMore:i.surveys.length<100&&0!==e.body.length,isLoading:!1,surveys:[].concat(Object(N.a)(i.surveys),Object(N.a)(t)),index:i.index+1}))}))};return window.onscroll=L()((function(){i.error||i.isLoading||!i.hasMore||t.current&&window.innerHeight+document.documentElement.scrollTop>t.current.offsetTop+t.current.clientHeight&&(u(Object(n.a)(Object(n.a)({},i),{},{isLoading:!0})),m(void 0,e.ActiveType))}),300),c.a.useEffect((function(){m(void 0,e.ActiveType),e.SetReloadFunction&&e.SetReloadFunction(m)}),[]),c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{ref:t},i.surveys.map((function(e,t){return c.a.createElement(o.Fragment,{key:e.props.ElementId},e,c.a.createElement("br",null))})),c.a.createElement("hr",null),i.error&&c.a.createElement("div",{style:{color:"#900"}},i.error),i.isLoading&&c.a.createElement("div",null,"Loading..."),!i.hasMore&&c.a.createElement(We.a,null,"\u0412\u044b \u0441\u0434\u0435\u043b\u0430\u043b\u0438 \u044d\u0442\u043e! \u0412\u044b \u0434\u043e\u0448\u043b\u0438 \u0434\u043e \u043a\u043e\u043d\u0446\u0430, \u0442\u0430\u043a \u0434\u0435\u0440\u0436\u0430\u0442\u044c!")))}var vt=Object(g.a)((function(e){return{tabs:{backgroundColor:e.palette.secondary.main},mainBox:{backgroundColor:"transparent"},indicator:{backgroundColor:"white"}}}));function ht(e){var t=Object(w.f)(),a=(c.a.useContext(Sa),vt()),o=t.location.pathname.split("/").pop(),l=c.a.useState({value:"new"===o||"home"===o?1:0,activeType:"",reloadFunc:void 0}),i=Object(r.a)(l,2),m=i[0],g=i[1],h=function(e,t){g(Object(n.a)(Object(n.a)({},m),{},{value:t}))},O=function(e){var t=m.activeType===e?"":e;g(Object(n.a)(Object(n.a)({},m),{},{activeType:t})),m.reloadFunc(void 0,t)},x=function(e){g(Object(n.a)(Object(n.a)({},m),{},{reloadFunc:e}))};return c.a.createElement(s.a,{style:{paddingLeft:"20px",paddingRight:"20px",paddingTop:"20px"}},c.a.createElement(u.a,{container:!0,spacing:3,alignItems:"flex-start",justify:"flex-start"},c.a.createElement(u.a,{item:!0,xs:12},c.a.createElement(E.a,{className:a.tabs},c.a.createElement(d.a,{TabIndicatorProps:{style:{backgroundColor:"white"}},selectionFollowsFocus:!0,centered:!0,value:m.value},c.a.createElement(p.a,{onClick:function(e){return h(0,0)},component:v.b,to:"".concat(S,"/top"),label:"TOP"}),c.a.createElement(p.a,{onClick:function(e){return h(0,1)},component:v.b,to:"".concat(S,"/new"),label:"NEW"}),c.a.createElement(f.a,{title:"\u0415\u0434\u0438\u043d\u0438\u0447\u043d\u044b\u0439 \u0432\u044b\u0431\u043e\u0440"},c.a.createElement(b.a,{color:"SINGLE"===m.activeType?"default":"primary",onClick:function(e){O("SINGLE")}},c.a.createElement(j.a,null))),c.a.createElement(f.a,{title:"\u041c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0432\u044b\u0431\u043e\u0440"},c.a.createElement(b.a,{color:"MULTIPLE"===m.activeType?"default":"primary",onClick:function(e){O("MULTIPLE")}},c.a.createElement(y.a,null))),c.a.createElement(f.a,{title:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433\u043e\u0432\u044b\u0439 \u0432\u044b\u0431\u043e\u0440"},c.a.createElement(b.a,{color:"RATING"===m.activeType?"default":"primary",onClick:function(e){O("RATING")}},c.a.createElement(k.a,null)))))),c.a.createElement(u.a,{item:!0,xs:12,id:"surveys"},c.a.createElement(E.a,{className:a.mainBox},c.a.createElement(s.a,null,0==m.value&&c.a.createElement(gt,{ActiveType:m.activeType,SetReloadFunction:x,Mode:"Top"}),1==m.value&&c.a.createElement(gt,{ActiveType:m.activeType,SetReloadFunction:x,Mode:"New"}))))))}var yt=a(646),Ot=a(164),jt=a.n(Ot),xt=a(645),kt=Object(g.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function wt(e){var t=Object(w.f)(),a=kt(),o=c.a.useState({password:"",username:"",jwt:"",connected:!1,error:!1}),l=Object(r.a)(o,2),i=l[0],s=l[1],m=function(e){s(Object(n.a)(Object(n.a)({},i),{},Object(P.a)({},e.target.name,e.target.value)))};return c.a.createElement(xt.a,{component:"main",maxWidth:"xs"},c.a.createElement(yt.a,null),c.a.createElement("div",{className:a.paper},c.a.createElement(We.a,{component:"p"},i.jwt),c.a.createElement(He.a,{className:a.avatar},c.a.createElement(jt.a,null)),c.a.createElement(_.a,{style:{padding:"20px"}},c.a.createElement(We.a,{component:"h1",variant:"h5"},"Sign in"),c.a.createElement("form",{className:a.form,noValidate:!0},c.a.createElement(R.a,{error:!0},i.error?"\u041d\u0435\u0432\u0435\u0440\u043d\u043e\u0435 \u0438\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c":""),c.a.createElement(it.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"username",autoComplete:"email",autoFocus:!0,value:i.username,onChange:m}),c.a.createElement(it.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:i.password,onChange:m}),c.a.createElement(z.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit,onClick:function(a,r,o){a.preventDefault(),fetch("".concat(C,"/authenticate"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:i.username,password:i.password}),redirect:"follow",credentials:"include"}).then((function(a){204===a.status?s(Object(n.a)(Object(n.a)({},i),{},{error:!0})):200===a.status&&(e.handleLoggedIn(),t.push("".concat(S,"/home")))}))}},"Sign In"),c.a.createElement(u.a,{container:!0},c.a.createElement(u.a,{item:!0},c.a.createElement(v.b,{to:"".concat(S,"/register"),variant:"body2"},"\u041d\u0435\u0442 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430? \u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")))))))}var Ct=Object(g.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}));function St(){var e=Ct(),t=c.a.useState({name:"",password:"",email:"",matchingPassword:"",gender:"",age:"",country:"",errors:{serverErrors:!1,clientErrors:!1},succesMessage:""}),a=Object(r.a)(t,2),o=a[0],l=a[1],i=c.a.useState("male"),s=Object(r.a)(i,2),m=(s[0],s[1],c.a.useState([])),d=Object(r.a)(m,2),p=d[0],f=d[1];c.a.useEffect((function(){fetch("".concat(C,"/getCountries"),{method:"GET",redirect:"follow"}).then((function(e){if(200===e.status)return e.json()})).then((function(e){e&&f([{name:"",id:0}].concat(Object(N.a)(e)))}))}),[]);var E=function(e){l(Object(n.a)(Object(n.a)({},o),{},Object(P.a)({},e.target.name,e.target.value)))},b=function(){var e=[];return o.age<0&&e.push("\u041d\u0430 \u0434\u0430\u043d\u043d\u044b\u0439 \u043c\u043e\u043c\u0435\u043d\u0442 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 \u0441 \u0432\u043e\u0437\u0440\u0430\u0441\u0442\u043e\u043c \u043c\u0435\u043d\u044c\u0448\u0435 \u043d\u0443\u043b\u044f \u043b\u0435\u0442 \u043d\u0435 \u043f\u0440\u0435\u0434\u0443\u0441\u043c\u043e\u0442\u0440\u0435\u043d\u0430 :("),o.age>150&&e.push("\u0420\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u0435\u043c \u0432\u044b\u043a\u043b\u044e\u0447\u0438\u0442\u0435 \u044d\u043a\u0440\u0430\u043d \u0434\u0430\u0431\u044b \u043d\u0435 \u0443\u0441\u0443\u0433\u0443\u0431\u043b\u044f\u0442\u044c \u043f\u0440\u043e\u0431\u043b\u0435\u043c\u044b \u0441\u043e \u0437\u0440\u0435\u043d\u0438\u0435\u043c. \u0412 \u0432\u0430\u0448\u0435\u043c \u0432\u043e\u0437\u0440\u0430\u0441\u0442\u0435 \u043e\u043d\u0438 \u043d\u0430\u0432\u0435\u0440\u043d\u044f\u043a\u0430 \u0435\u0441\u0442\u044c"),""===o.country&&e.push("\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0443"),""===o.gender&&e.push("\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043f\u043e\u043b"),e};return c.a.createElement(xt.a,{component:"main",maxWidth:"xs"},c.a.createElement(yt.a,null),c.a.createElement("div",{className:e.paper},c.a.createElement(He.a,{className:e.avatar},c.a.createElement(jt.a,null)),c.a.createElement(_.a,{style:{padding:"20px"}},c.a.createElement(We.a,{component:"h1",variant:"h5"},"Sign up"),c.a.createElement(We.a,{component:"h2"},o.succesMessage),c.a.createElement("form",{className:e.form,noValidate:!0},c.a.createElement(u.a,{container:!0,spacing:2},c.a.createElement(u.a,{item:!0,xs:12},c.a.createElement(it.a,{autoComplete:"login",name:"name",variant:"outlined",required:!0,fullWidth:!0,id:"login",label:"Login",defaultValue:o.name,onChange:E})),c.a.createElement(u.a,{item:!0,xs:12},c.a.createElement(it.a,{name:"gender",select:!0,variant:"outlined",required:!0,fullWidth:!0,id:"gender",label:"\u041f\u043e\u043b",defaultValue:"none",onChange:E,SelectProps:{native:!0}},c.a.createElement("option",{value:""}),c.a.createElement("option",{value:"male"},"\u041c\u0443\u0436\u0441\u043a\u043e\u0439"),c.a.createElement("option",{value:"female"},"\u0416\u0435\u043d\u0441\u043a\u0438\u0439"))),c.a.createElement(u.a,{item:!0,xs:12},c.a.createElement(it.a,{inputProps:{max:150,min:0},name:"age",variant:"outlined",required:!0,fullWidth:!0,id:"age",type:"number",label:"\u0412\u043e\u0437\u0440\u0430\u0441\u0442",defaultValue:o.age,onChange:E})),c.a.createElement(u.a,{item:!0,xs:12},c.a.createElement(it.a,{select:!0,name:"country",variant:"outlined",required:!0,fullWidth:!0,id:"country",label:"\u0421\u0442\u0440\u0430\u043d\u0430",onChange:E,SelectProps:{native:!0}},p.map((function(e){return c.a.createElement("option",{key:"country-".concat(e.id),value:e.name},e.name)})))),c.a.createElement(u.a,{item:!0,xs:12},c.a.createElement(it.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",defaultValue:o.email,onChange:E})),c.a.createElement(u.a,{item:!0,xs:12},c.a.createElement(it.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",defaultValue:o.password,onChange:function(e){E(e)}})),c.a.createElement(u.a,{item:!0,xs:12},c.a.createElement(it.a,{variant:"outlined",required:!0,fullWidth:!0,name:"matchingPassword",label:"Confirm your password",type:"password",id:"confirm_password",autoComplete:"current-password",defaultValue:o.matchingPassword,onChange:function(e){E(e)}}),c.a.createElement(R.a,{error:!0},o.matchingPassword!==o.password?"\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442":""),Array.from(o.errors.clientErrors).map((function(e){return c.a.createElement(R.a,{error:!0},e)})),Array.from(o.errors.serverErrors).map((function(e){return c.a.createElement(R.a,{error:!0},e)})))),c.a.createElement(z.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:e.submit,onClick:function(e){e.preventDefault(),fetch("".concat(C,"/signUp"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:o.name,password:o.password,email:o.email,matchingPassword:o.matchingPassword,country:o.country,age:o.age,gender:o.gender}),redirect:"follow",credentials:"include"}).then((function(e){return 400===e.status?e.json().then((function(e){l(Object(n.a)(Object(n.a)({},o),{},{errors:Object(n.a)(Object(n.a)({},o.errors),{},{serverErrors:e,clientErrors:b()})}))})):200===e.status&&l(Object(n.a)(Object(n.a)({},o),{},{succesMessage:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u0430! \u0414\u043b\u044f \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0435\u043d\u0438\u044f \u043f\u0435\u0440\u0435\u0439\u0434\u0438\u0442\u0435 \u043f\u043e \u0441\u0441\u044b\u043b\u043a\u0435 \u043f\u0440\u0438\u0441\u043b\u0430\u043d\u043d\u043e\u0439 \u043d\u0430 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u0443\u044e \u043f\u043e\u0447\u0442\u0443"})),e.json()}))}},"Sign Up"),c.a.createElement(u.a,{container:!0,justify:"flex-end"},c.a.createElement(u.a,{item:!0},c.a.createElement(v.b,{to:"".concat(S,"/login"),variant:"body2"},"\u0423\u0436\u0435 \u0435\u0441\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442? \u0412\u043e\u0439\u0442\u0438")))))))}var Tt=a(199),Nt=a.n(Tt),Jt=a(198),Ft=a.n(Jt),It=a(167),Lt=a.n(It),Pt=a(574),At=a(570),Dt=a(299),Mt=a.n(Dt),Rt=a(568),zt=a(572),Bt=Object(g.a)((function(){return{root:{border:"2px solid #426480",borderRadius:5,"&:hover":{outline:"none",borderColor:"#5f7d96",boxShadow:"0 0 5px #5f7d96"},padding:3,display:"flex"},tag:{borderRadius:7,padding:0,backgroundColor:"#a0a9da",paddingLeft:10,fontSize:15,width:"max-content",margin:2},icon:{padding:2},input:{marginLeft:5},popper:{padding:3,width:200},fetchedTag:{backgroundColor:"#a2a2dc",margin:2,padding:5,borderRadius:5,cursor:"pointer","&:hover":{backgroundColor:"#c3c3ec"},display:"inline-block"},h1:{width:30,marginTop:-16,marginLeft:5,height:"fit-content",fontSize:18,fontWeight:"normal"}}}));function Vt(e){var t=Bt(),a=c.a.useState([]),n=Object(r.a)(a,2),o=n[0],l=n[1],i=c.a.useState(""),u=Object(r.a)(i,2),m=u[0],d=u[1],p=c.a.useState(null),f=Object(r.a)(p,2),g=f[0],v=f[1],h=c.a.useState([]),y=Object(r.a)(h,2),O=y[0],j=y[1],x=Boolean(g),k=x?"simple-popover":void 0;c.a.useEffect((function(){e.CallBack(o)}),[o]);var w=function(){v(null)};return c.a.createElement(c.a.Fragment,null,c.a.createElement(We.a,null,"\u0422\u0435\u0433\u0438 (\u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c \u0441\u0432\u043e\u0438 \u0442\u0435\u0433\u0438 \u043f\u043e\u043a\u0430 \u0447\u0442\u043e \u043d\u0435\u043b\u044c\u0437\u044f)"),c.a.createElement(s.a,{className:t.root},o.map((function(e,a){return c.a.createElement(s.a,{className:t.tag},e,c.a.createElement(b.a,{onClick:function(e){return function(e,t){o.splice(t,1),l(Object(N.a)(o))}(0,a)},className:t.icon,color:"primary"},c.a.createElement(Mt.a,null)))})),c.a.createElement(Rt.a,{className:t.input,onChange:function(e){v(e.target.value?e.currentTarget:null),d(e.target.value),fetch("".concat(C,"/getTags?text=").concat(e.target.value),{method:"GET",redirect:"follow",credentials:"include"}).then((function(e){if(200===e.status)return e.json()})).then((function(e){j(e.filter((function(e){return!o.some((function(t){return t===e.name}))})))}))},value:m,error:!1}),c.a.createElement(zt.a,{open:x,id:k,anchorEl:g,onClose:w,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},c.a.createElement(E.a,{elevation:2,className:t.popper},O.length>0&&O.map((function(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement(s.a,{className:t.fetchedTag,onClick:function(){return t=e.name,w(),l([].concat(Object(N.a)(o),[t])),j(Object(N.a)(O).filter((function(e){return e.name!==t}))),void d("");var t}},e.name))})),0===O.length&&c.a.createElement("div",null,"\u041e\u0439. \u042d\u0442\u043e\u0442 \u0442\u0435\u0433 \u0435\u0449\u0435 \u043d\u0435 \u043f\u0440\u0438\u0434\u0443\u043c\u0430\u043b\u0438")))))}var Wt=Object(g.a)((function(e){return{paper:{},kinds:{backgroundColor:"#33a570"},mainBox:{backgroundColor:"#33a570",padding:10}}}));function qt(e){var t=Object(w.f)(),a=Wt(),o=c.a.useState(""),l=Object(r.a)(o,2),i=l[0],s=l[1],m=c.a.useState(!1),d=Object(r.a)(m,2),p=d[0],g=d[1],v=c.a.useState({}),h=Object(r.a)(v,2),O=h[0],x=h[1],T=c.a.useState([]),J=Object(r.a)(T,2),F=J[0],I=J[1],L=c.a.useState([]),A=Object(r.a)(L,2),M=A[0],B=A[1],V=c.a.useState("None"),W=Object(r.a)(V,2),q=W[0],G=W[1],_=c.a.useState({options:new Set,rows:new Set,columns:new Set,type:"Single",body:null,image:""}),U=Object(r.a)(_,2),H=U[0],K=U[1],Y=c.a.useContext(Sa);c.a.useEffect((function(){fetch("".concat(C,"/getCategories"),{method:"GET",redirect:"follow",credentials:"include"}).then((function(e){if(200===e.status)return e.json()})).then((function(e){I([{name:"None",id:-1}].concat(Object(N.a)(e)))}))}),[]);var $=function(e){if(e.preventDefault(),0===Object.keys(ae()).length){var a={question:i,type:H.type,image:H.image,category:q,tags:M};a="Rating"===H.type?Object(n.a)(Object(n.a)({},a),{},{rows:Object(N.a)(H.rows),columns:Object(N.a)(H.columns)}):Object(n.a)(Object(n.a)({},a),{},{options:Object(N.a)(H.options)}),fetch("".concat(C,"/addSurvey"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a),redirect:"follow",credentials:"include"}).then((function(e){if(200==e.status)return e.json()})).then((function(e){e&&(Y("\u041e\u043f\u0440\u043e\u0441 \u0441\u043e\u0437\u0434\u0430\u043d :)"),t.push("".concat(S,"/new")))}))}},X=function(e){if(""!==e.target.value){var t=H.options;t.add(e.target.value),K(Object(n.a)(Object(n.a)({},H),{},{options:t})),e.target.value=""}},Z=function(e){if(""!==e.target.value){var t=H[e.target.name];t.add(e.target.value),K(Object(n.a)(Object(n.a)({},H),{},Object(P.a)({},e.target.name,t))),e.target.value=""}},Q=function(e,t,a){var r=Object(N.a)(H.options);r[t]=e.target.value,K(Object(n.a)(Object(n.a)({},H),{},{options:new Set(r)}))},ee=function(e){var t=Object(N.a)(H.options).indexOf(e),a=Object(N.a)(H.options);a.splice(t,1),K(Object(n.a)(Object(n.a)({},H),{},{options:new Set(a)}))},te=function(e,t){return c.a.createElement(c.a.Fragment,null,Array.from(H[e]).map((function(t,a){return c.a.createElement(u.a,{key:t,container:!0,alignItems:"center"},c.a.createElement(u.a,{item:!0,xs:1},a+1,"."),c.a.createElement(u.a,{item:!0,xs:9},c.a.createElement(it.a,{defaultValue:t,onBlur:function(t){return function(e,t,a){var r=Object(N.a)(H[a]);r[t]=e.target.value,K(Object(n.a)(Object(n.a)({},H),{},Object(P.a)({},a,new Set(r))))}(t,a,e)}})),c.a.createElement(u.a,{item:!0,xs:2},c.a.createElement(b.a,{onClick:function(a){return function(e,t){var a=Object(N.a)(H[e]).indexOf(t),r=Object(N.a)(H[e]);r.splice(a,1),K(Object(n.a)(Object(n.a)({},H),{},Object(P.a)({},e,new Set(r))))}(e,t)},color:"primary","aria-label":"",component:"span"},c.a.createElement(Lt.a,null))))})),c.a.createElement(it.a,{name:e,placeholder:t,onBlur:Z}))},ae=function(){var e={};switch(""===i&&(e.Name="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f"),""!==q&&void 0!==q&&"None"!==q||(e.Select="\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e"),H.type){case"Multiple":case"Single":H.options.size<2&&(e.Options="\u0421\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u0431\u043e\u043b\u0435\u0435 \u043e\u0434\u043d\u043e\u0433\u043e \u0432\u0430\u0440\u0438\u0430\u043d\u0442\u0430");break;case"Rating":H.rows.size<2&&(e.Rows="\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0431\u043e\u043b\u0435\u0435 \u043e\u0434\u043d\u043e\u0433\u043e \u0440\u044f\u0434\u043a\u0430"),H.columns.size<2&&(e.Columns="\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0431\u043e\u043b\u0435\u0435 \u043e\u0434\u043d\u043e\u0439 \u043a\u043e\u043b\u043e\u043d\u043a\u0438");break;default:e.Type="\u0422\u0438\u043f \u043e\u043f\u0440\u043e\u0441\u0430 \u043d\u0435 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d"}return x(e),g(Object.keys(e).length>0),e},ne=function(e){K(Object(n.a)(Object(n.a)({},H),{},{type:e}))};return c.a.createElement(c.a.Fragment,null,c.a.createElement(u.a,{container:!0,spacing:3},c.a.createElement(u.a,{item:!0,xs:12},c.a.createElement(E.a,{className:a.kinds},c.a.createElement(it.a,{autoComplete:"off",placeholder:"\u041d\u043e\u0432\u044b\u0439 \u043e\u043f\u0440\u043e\u0441",onBlur:function(e){s(e.target.value)},required:!0,error:null!=O.Name}),c.a.createElement(f.a,{title:"\u0415\u0434\u0438\u043d\u0438\u0447\u043d\u044b\u0439 \u0432\u044b\u0431\u043e\u0440"},c.a.createElement(b.a,{onClick:function(){return ne("Single")},color:"Single"===H.type?"primary":"default"},c.a.createElement(j.a,null))),c.a.createElement(f.a,{title:"\u041c\u043d\u043e\u0436\u0435\u0441\u0442\u0432\u0435\u043d\u043d\u044b\u0439 \u0432\u044b\u0431\u043e\u0440"},c.a.createElement(b.a,{onClick:function(){return ne("Multiple")},color:"Multiple"===H.type?"primary":"default"},c.a.createElement(y.a,null))),c.a.createElement(f.a,{title:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433\u043e\u0432\u044b\u0439 \u0432\u044b\u0431\u043e\u0440"},c.a.createElement(b.a,{onClick:function(){return ne("Rating")},color:"Rating"===H.type?"primary":"default"},c.a.createElement(k.a,null))))),c.a.createElement(u.a,{item:!0,xs:12},c.a.createElement(u.a,{container:!0,spacing:3},c.a.createElement(u.a,{item:!0,xs:6},c.a.createElement(E.a,{className:a.mainBox},c.a.createElement("form",{onSubmit:$},c.a.createElement(D.a,{component:"fieldset",error:p},c.a.createElement(R.a,null,O.Name),c.a.createElement(it.a,{autoComplete:"off",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 (\u043d\u0435 \u043e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e)",onBlur:function(e){K(Object(n.a)(Object(n.a)({},H),{},{image:e.target.value}))},error:null!=O.img}),c.a.createElement(D.a,{required:!0},c.a.createElement(At.a,{htmlFor:"age-native-required"},"\u041a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044f"),c.a.createElement(Pt.a,{value:q,onChange:function(e){G(e.target.value)},name:"category"},F.map((function(e){return c.a.createElement(nt.a,{key:e.id,value:e.name},e.name)})))),function(e){switch(H.type){case"Single":return c.a.createElement(c.a.Fragment,null,Array.from(H.options).map((function(e,t){return c.a.createElement(u.a,{key:e,container:!0,spacing:1,alignItems:"flex-end"},c.a.createElement(u.a,{item:!0},c.a.createElement(Ft.a,{color:"disabled"})),c.a.createElement(u.a,{item:!0},c.a.createElement(it.a,{defaultValue:e,onBlur:function(e){return Q(e,t)}})),c.a.createElement(u.a,{item:!0},c.a.createElement(b.a,{onClick:function(){return ee(e)},color:"primary","aria-label":"",component:"span"},c.a.createElement(Lt.a,null))),c.a.createElement(u.a,{item:!0}))})),c.a.createElement(u.a,{container:!0,spacing:1,alignItems:"flex-end"},c.a.createElement(u.a,{item:!0},c.a.createElement(Ft.a,{color:"disabled"})),c.a.createElement(u.a,{item:!0},c.a.createElement(it.a,{placeholder:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u0430\u0440\u0438\u0430\u043d\u0442",onBlur:X}))),c.a.createElement(R.a,null,O.Options));case"Multiple":return c.a.createElement(c.a.Fragment,null,Array.from(H.options).map((function(e,t){return c.a.createElement(u.a,{key:e,container:!0,spacing:1,alignItems:"flex-end"},c.a.createElement(u.a,{item:!0},c.a.createElement(Nt.a,{color:"disabled"})),c.a.createElement(u.a,{item:!0},c.a.createElement(it.a,{defaultValue:e,onBlur:function(e){return Q(e,t)}})),c.a.createElement(u.a,{item:!0},c.a.createElement(b.a,{onClick:function(){return ee(e)},color:"primary","aria-label":"",component:"span"},c.a.createElement(Lt.a,null))),c.a.createElement(u.a,{item:!0}))})),c.a.createElement(u.a,{container:!0,spacing:1,alignItems:"flex-end"},c.a.createElement(u.a,{item:!0},c.a.createElement(Nt.a,{color:"disabled"})),c.a.createElement(u.a,{item:!0},c.a.createElement(it.a,{placeholder:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432\u0430\u0440\u0438\u0430\u043d\u0442",onBlur:X}))),c.a.createElement(R.a,null,O.Options));case"Rating":return c.a.createElement(c.a.Fragment,null,c.a.createElement(u.a,{container:!0,spacing:1},c.a.createElement(u.a,{item:!0,xs:6},te("rows","\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0442\u0440\u043e\u043a\u0443")),c.a.createElement(u.a,{item:!0,xs:6},te("columns","\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0442\u043e\u043b\u0431\u0435\u0446"))),c.a.createElement(R.a,null,O.Columns),c.a.createElement(R.a,null,O.Rows));default:return c.a.createElement("div",null,"\u041f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442 \u0447\u0442\u043e-\u0442\u043e \u0441\u0442\u0440\u0430\u043d\u043d\u043e\u0435. \u041d\u0435 \u0437\u043d\u0430\u0435\u0448\u044c \u0447\u0442\u043e \u0438\u043c\u0435\u043d\u043d\u043e?")}}(),c.a.createElement(R.a,null,O.Select),c.a.createElement(Vt,{CallBack:function(e){B(e)}}),c.a.createElement("br",null),c.a.createElement(z.a,{type:"submit",variant:"contained",color:"primary",onClick:$},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u043f\u0440\u043e\u0441"))))),c.a.createElement(u.a,{item:!0,xs:6},c.a.createElement(bt,{surveyJson:{type:H.type,comments:[],tags:[],options:Array.from(H.options),rows:Array.from(H.rows),columns:Array.from(H.columns)}}))))))}function Gt(e){var t=new URLSearchParams(Object(w.g)().search),a=c.a.useState(""),n=Object(r.a)(a,2),o=n[0],l=n[1];return c.a.useEffect((function(){fetch("".concat(C,"/regitrationConfirm?token=").concat(t.get("token")),{method:"GET",credentials:"include"}).then((function(e){200===e.status?l("\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043f\u0440\u043e\u0448\u043b\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e. \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0439\u0442\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043d\u044b\u0435 \u043f\u0430\u0440\u043e\u043b\u044c \u0438 \u043b\u043e\u0433\u0438\u043d \u0434\u043b\u044f \u0432\u0445\u043e\u0434\u0430"):404===e.status&&l("\u041e\u0448\u0438\u0431\u043a\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438")}))}),[t]),c.a.createElement("div",null,o)}var _t=a(648),Ut=a(301),Ht=a.n(Ut),Kt=a(652),Yt=a(650),$t=a(651),Xt=a(649),Zt=a(647),Qt=a(300),ea=a.n(Qt),ta=Object(g.a)((function(e){return{}}));function aa(e){ta();var t=c.a.useState(!1),a=Object(r.a)(t,2),n=a[0],o=a[1],l=c.a.useState(),i=Object(r.a)(l,2),s=i[0],m=i[1],d=c.a.useState([]),p=Object(r.a)(d,2),f=p[0],E=p[1],g=function(){o(!1)},h=e.UserId,y=e.Username;return c.a.useEffect((function(){0!==h&&fetch("".concat(C,"/getProfileSurveys"),{method:"GET",credentials:"include"}).then((function(e){if(200===e.status)return e.json()})).then((function(e){e&&E(e)}))}),[h]),c.a.createElement(c.a.Fragment,null,c.a.createElement(u.a,{container:!0},c.a.createElement(u.a,{item:!0,xs:12},c.a.createElement(We.a,{variant:"h5"},y),c.a.createElement(We.a,{variant:"h6"},"\u0412\u0430\u0448\u0438 \u043e\u043f\u0440\u043e\u0441\u044b:"),c.a.createElement(U.a,{dense:!0},0===f.length&&c.a.createElement(Zt.a,null),0!==f.length&&f.map((function(e){return c.a.createElement(H.a,{button:!0},c.a.createElement(rt.a,null,c.a.createElement(He.a,null,e.image&&c.a.createElement("img",{src:e.image,style:{maxWidth:"50px"}}),!e.image&&c.a.createElement(ea.a,null))),c.a.createElement(v.b,{style:{textDecoration:"none",width:"100%"},to:"".concat(S,"/survey/").concat(e.id)},c.a.createElement(Y.a,{primary:e.question,secondary:e.answered_amount+" \u043f\u0440\u043e\u0433\u043e\u043b\u043e\u0441\u043e\u0432\u0430\u0432\u0448\u0438\u0445"})),c.a.createElement(_t.a,null,c.a.createElement(b.a,{edge:"end",onClick:function(t){!function(e){m(e),o(!0)}(e)}},c.a.createElement(Ht.a,null))))}))))),c.a.createElement(we.a,{open:n,onClose:g},c.a.createElement(Xt.a,null,"\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u044d\u0442\u043e\u0442 \u043e\u043f\u0440\u043e\u0441?"),c.a.createElement(Yt.a,null,c.a.createElement($t.a,null,"\u0423\u0434\u0430\u043b\u044f\u044f \u044d\u0442\u043e\u0442 \u043e\u043f\u0440\u043e\u0441 \u0432\u044b \u0442\u0430\u043a\u0436\u0435 \u043b\u0438\u0448\u0430\u0435\u0442\u0435 \u0434\u0440\u0443\u0433\u0438\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0435\u0439 \u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e\u0441\u0442\u0438 \u0433\u043e\u043b\u043e\u0441\u043e\u0432\u0430\u0442\u044c \u0438 \u043f\u0440\u043e\u0441\u043c\u0430\u0442\u0440\u0438\u0432\u0430\u0442\u044c \u0435\u0433\u043e \u0441\u0442\u0430\u0442\u0438\u0441\u0442\u0438\u043a\u0443, \u043a\u043e\u0442\u043e\u0440\u0430\u044f \u043c\u043e\u0436\u0435\u0442 \u0431\u044b\u0442\u044c \u0437\u043d\u0430\u0447\u0438\u043c\u043e\u0439 \u0434\u043b\u044f \u0434\u0440\u0443\u0433\u0438\u0445.")),c.a.createElement(Kt.a,null,c.a.createElement(z.a,{onClick:g,color:"primary"},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"),c.a.createElement(z.a,{onClick:function(e){g(),fetch("".concat(C,"/deleteSurvey"),{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({surveyId:s.id}),redirect:"follow",credentials:"include"}).then((function(e){200===e.status&&E(f.filter((function(e){return e!==s})))}))},color:"primary",autoFocus:!0},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"))))}var na=a(654);function ra(e){var t=Object(w.h)().id,a=c.a.useState(),n=Object(r.a)(a,2),o=n[0],l=n[1],i=(c.a.useContext(Sa),Object(w.f)());c.a.useEffect((function(){fetch("".concat(C,"/survey?id=").concat(t),{method:"GET",credentials:"include"}).then((function(e){if(200===e.status)return e.json()})).then((function(e){e&&l(e)}))}),[]);return c.a.createElement(c.a.Fragment,null,!o&&c.a.createElement(Zt.a,null),o&&c.a.createElement(bt,{surveyJson:o,onSurveyDeleteFunc:function(e){i.push("".concat(S,"/profile"))}}),c.a.createElement("div",{style:{width:"500px",height:"200px",border:"1px solid black"}},c.a.createElement(Oe,{markers:o&&o.locations})))}var oa=a(34),ca=a.n(oa),la=a(103),ia=a(104),ua=Object(g.a)((function(e){return{markdown:Object(n.a)(Object(n.a)({},e.typography.body2),{},{padding:e.spacing(3,0)})}}));function sa(e){ua();var t=Object(o.useState)([]),n=Object(r.a)(t,2),l=n[0],i=n[1];console.log("importing...");var u,s=(u=a(549),u.keys().map(u)).sort().reverse();c.a.useEffect((function(){function e(){return(e=Object(la.a)(ca.a.mark((function e(){var t;return ca.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(s.map((function(e){return fetch(e).then((function(e){return e.text()}))}))).catch((function(e){return console.error(e)}));case 2:t=e.sent,i(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var m={overrides:{p:{component:We.a,props:{paragraph:!0}},li:{component:We.a,props:{variant:"subtitle1",component:"li"}},h4:{component:We.a,props:{variant:"h6"}}}};return c.a.createElement(c.a.Fragment,null,c.a.createElement(_.a,null,l.map((function(e,t){return c.a.createElement(c.a.Fragment,null,c.a.createElement(ia.a,{options:m},e),c.a.createElement("hr",{style:{borderTop:"1px dotted black",backgroundColor:"transparent",height:"1px"}}))}))))}var ma=a(303),da=a(166);function pa(e){var t=c.a.useState({isLoading:!0,survey:{}}),a=Object(r.a)(t,2),o=a[0],l=a[1];return c.a.useEffect((function(){fetch("".concat(C,"/survey?id=").concat(e.SurveyId),{method:"GET",credentials:"include"}).then((function(e){if(200===e.status)return e.json()})).then((function(e){return l(Object(n.a)(Object(n.a)({},o),{},{survey:e,isLoading:!1}))}))}),[]),c.a.createElement(c.a.Fragment,null,null!=o.survey&&!o.isLoading&&c.a.createElement(bt,{surveyJson:o.survey}))}var fa=Object(g.a)((function(e){return{markdown:Object(n.a)(Object(n.a)({},e.typography.body2),{},{padding:e.spacing(3,0)})}})),Ea={overrides:{p:{component:We.a,props:{paragraph:!0}},li:{component:We.a,props:{variant:"subtitle1",component:"li"}},h4:{component:We.a,props:{variant:"h6"}},SeparateSurveyComponent:{component:pa}}};function ba(e){fa();var t,n=Object(o.useState)([]),l=Object(r.a)(n,2),i=l[0],u=l[1],s=(t=a(552),t.keys().map(t)).sort().reverse();return c.a.useEffect((function(){function e(){return(e=Object(la.a)(ca.a.mark((function e(){var t;return ca.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(s.map((function(e){return fetch(e).then((function(e){return e.text()}))}))).catch((function(e){return console.error(e)}));case 2:t=e.sent,u(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),c.a.createElement(c.a.Fragment,null,c.a.createElement(_.a,null,i.map((function(e,t){return c.a.createElement(c.a.Fragment,null,c.a.createElement(ia.a,{options:Ea},e),c.a.createElement("hr",{style:{borderTop:"1px dotted black",backgroundColor:"transparent",height:"1px"}}))}))))}var ga=Object(g.a)((function(e){return{markdown:Object(n.a)(Object(n.a)({},e.typography.body2),{},{padding:e.spacing(3,0)})}})),va={overrides:{p:{component:We.a,props:{paragraph:!0}},li:{component:We.a,props:{variant:"subtitle1",component:"li"}},h4:{component:We.a,props:{variant:"h6"}},SeparateSurveyComponent:{component:pa}}};function ha(e){ga();var t,n=Object(o.useState)([]),l=Object(r.a)(n,2),i=l[0],u=l[1],s=(t=a(554),t.keys().map(t)).sort().reverse();return c.a.useEffect((function(){function e(){return(e=Object(la.a)(ca.a.mark((function e(){var t;return ca.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(s.map((function(e){return fetch(e).then((function(e){return e.text()}))}))).catch((function(e){return console.error(e)}));case 2:t=e.sent,u(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),c.a.createElement(c.a.Fragment,null,c.a.createElement(_.a,null,i.map((function(e,t){return c.a.createElement(c.a.Fragment,null,c.a.createElement(ia.a,{options:va},e),c.a.createElement("hr",{style:{borderTop:"1px dotted black",backgroundColor:"transparent",height:"1px"}}))}))))}var ya=a(655),Oa=a(653),ja=Object(g.a)((function(e){return{popup:{width:"200px",zIndex:"1",position:"fixed",bottom:"10px",left:"10px",padding:"10px",fontFamily:e.typography.fontFamily,backgroundColor:e.palette.info.main}}}));function xa(e){var t=c.a.useState(!0),a=Object(r.a)(t,2),n=(a[0],a[1],ja());return c.a.createElement(c.a.Fragment,null,c.a.createElement(Oa.a,{in:!0,direction:"up",mountOnEnter:!0,unmountOnExit:!0},c.a.createElement(_.a,{className:n.popup,color:""},e.message)))}var ka=a(627);function wa(){return c.a.createElement(We.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",c.a.createElement(na.a,{color:"inherit",href:"/home"},"runningwilder.github.io/SurveyIt")," ",(new Date).getFullYear(),".")}var Ca=c.a.createContext({}),Sa=c.a.createContext("help me"),Ta=c.a.createContext((function(){}));function Na(){var e=c.a.useState({loggedIn:!1,username:"",userId:0,activeType:"",activeTag:"",message:"",hidden:!0,userInfo:{username:null,userId:null,loggedIn:null}}),t=Object(r.a)(e,2),a=t[0],o=t[1],l=function(){console.log("checking auth"),fetch("".concat(C,"/logged_in"),{method:"GET",credentials:"include"}).then((function(e){if(200===e.status&&!a.loggedIn)return e.json();o(Object(n.a)(Object(n.a)({},a),{},{userInfo:{username:null,userId:null,loggedIn:!1}}))})).then((function(e){e&&(console.log(e),o(Object(n.a)(Object(n.a)({},a),{},{userInfo:{username:e.username,userId:e.user_id,loggedIn:!0}})))}))};return c.a.useEffect((function(){l()}),[]),c.a.createElement(Ta.Provider,{value:l},c.a.createElement(Ca.Provider,{value:a.userInfo},c.a.createElement(Sa.Provider,{value:function(e){o(Object(n.a)(Object(n.a)({},a),{},{message:e,hidden:!1})),setTimeout((function(){o(Object(n.a)(Object(n.a)({},a),{},{message:e,hidden:!0}))}),3e3)}},c.a.createElement(v.a,null,c.a.createElement(u.a,{container:!0,spacing:3},c.a.createElement(u.a,{item:!0,xs:12,sm:9},c.a.createElement(s.a,null,c.a.createElement(ka.a,{in:!a.hidden,timeout:500},c.a.createElement("div",null,c.a.createElement(xa,{message:a.message}))),c.a.createElement(w.b,{exact:!0,path:["".concat(S,"/"),"".concat(S,"/new"),"".concat(S,"/home"),"".concat(S,"/top")]},c.a.createElement(ht,null)),c.a.createElement(w.b,{path:"".concat(S,"/random"),render:function(e){return c.a.createElement(Je,e)}}),c.a.createElement(w.b,{path:"".concat(S,"/login")},c.a.createElement(wt,{handleLoggedIn:l})),c.a.createElement(w.b,{path:"".concat(S,"/createSurvey")},c.a.createElement(qt,null)),c.a.createElement(w.b,{path:"".concat(S,"/profile")},c.a.createElement(aa,null)),c.a.createElement(w.b,{path:"".concat(S,"/register")},c.a.createElement(St,null)),c.a.createElement(w.b,{path:"".concat(S,"/registrationConfirm")},c.a.createElement(Gt,null)),c.a.createElement(w.b,{path:"".concat(S,"/survey/:id")},c.a.createElement(ra,null)),c.a.createElement(w.b,{path:"".concat(S,"/news")},c.a.createElement(sa,null)),c.a.createElement(w.b,{path:"".concat(S,"/donate")}," ",c.a.createElement(ha,null)," "," "),c.a.createElement(w.b,{path:"".concat(S,"/about")},c.a.createElement(ba,null)),c.a.createElement(w.b,{path:"".concat(S,"/signout")},c.a.createElement(w.a,{to:"".concat(S,"/")})),c.a.createElement(wa,null))),c.a.createElement(u.a,{item:!0,sm:3,style:{paddingRight:"10px"}},c.a.createElement(m.a,{only:"xs"},c.a.createElement(s.a,{style:{position:"sticky",top:"0"}},c.a.createElement(X,null)),c.a.createElement(ve,null))))))))}var Ja=Object(ma.a)({overrides:{MuiListItem:{root:{"&$selected":{background:"linear-gradient(21deg, rgba(54,54,61,0.8132440476190477) 0%, rgba(95,154,164,0.7740283613445378) 100%)"},"&$selected:hover":{backgroundColor:da.a[700]}}}},shape:{borderRadius:0},palette:{primary:{main:"#ccced8"},secondary:{main:"#3d608c"},info:{main:"#54c0ef8c"}},typography:{fontSize:13,fontFamily:"Comic Sans MS, cursive, sans-serif"}});i.a.render(c.a.createElement(ya.a,{theme:Ja},c.a.createElement(Na,null)),document.getElementById("root"))}},[[356,1,2]]]);
//# sourceMappingURL=main.71652e5a.chunk.js.map